# ‚úÖ –ê–ù–ê–õ–ò–¢–ò–ß–ï–°–ö–ê–Ø –°–ò–°–¢–ï–ú–ê V2.0 - –ó–ê–í–ï–†–®–ï–ù–ê

## üìä –û–±–∑–æ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. ‚ö° –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–ü–û–°–¢–´ (–æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç):**
- –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏/—Å—Å—ã–ª–∫–∞–º–∏
- –í–∏–¥–µ–æ > 60 —Å–µ–∫—É–Ω–¥
- –§–æ—Ç–æ —Å –¥–ª–∏–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º (> 100 —Å–∏–º–≤–æ–ª–æ–≤)

**–í–ò–î–ï–û-–ö–û–ù–¢–ï–ù–¢/–°–¢–û–†–ò–° (–∫–æ—Ä–æ—Ç–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç):**
- –í–∏–¥–µ–æ ‚â§ 60 —Å–µ–∫—É–Ω–¥
- –§–æ—Ç–æ —Å –∫–æ—Ä–æ—Ç–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º (‚â§ 100 —Å–∏–º–≤–æ–ª–æ–≤)  
- –ú–µ–¥–∏–∞ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞

**–ö–†–£–ñ–ö–ò (–≤–∏–¥–µ–æ-–∫–æ–Ω—Ç–µ–Ω—Ç):**
- –ö–æ—Ä–æ—Ç–∫–∏–µ –≤–∏–¥–µ–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∫—Ä—É–∂–∫–æ–≤
- –í–∏–¥–µ–æ-–∑–∞–º–µ—Ç–∫–∏ ‚â§ 60 —Å–µ–∫—É–Ω–¥

### 2. üî¢ –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ ER

**–°–¢–ê–†–ê–Ø –§–û–†–ú–£–õ–ê:** `(—Ä–µ–∞–∫—Ü–∏–∏ + –ø–µ—Ä–µ—Å—ã–ª–∫–∏) / –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ * 100%`

**–ù–û–í–ê–Ø –§–û–†–ú–£–õ–ê:** `—Ä–µ–∞–∫—Ü–∏–∏ / –ø—Ä–æ—Å–º–æ—Ç—Ä—ã * 100%`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –¢–æ—á–Ω–µ–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã, –∞ –Ω–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç —Ä–∞—Å—á–µ—Ç–∞ ER

### 3. üìà –†–∞–∑–¥–µ–ª—å–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç —Ä–µ–∞–∫—Ü–∏–π

- **posts_reactions** - —Ä–µ–∞–∫—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ –ø–æ—Å—Ç—ã
- **story_likes** - —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –≤–∏–¥–µ–æ-–∫–æ–Ω—Ç–µ–Ω—Ç/—Å—Ç–æ—Ä–∏—Å
- **total_reactions** - –æ–±—â–∞—è —Å—É–º–º–∞ –≤—Å–µ—Ö —Ä–µ–∞–∫—Ü–∏–π

### 4. ‚è∞ –ê–Ω–∞–ª–∏–∑ –ª—É—á—à–∏—Ö —á–∞—Å–æ–≤ —Å –Ω–æ–≤–æ–π —Ñ–æ—Ä–º—É–ª–æ–π

- –†–∞—Å—á–µ—Ç ER –ø–æ —á–∞—Å–∞–º: `(—Ä–µ–∞–∫—Ü–∏–∏ –∑–∞ —á–∞—Å / –ø—Ä–æ—Å–º–æ—Ç—Ä—ã –∑–∞ —á–∞—Å) * 100%`
- –¢–æ–ø-3 —á–∞—Å–∞ —Å –ª—É—á—à–∏–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–º ER
- –§–æ—Ä–º–∞—Ç: "14:00‚Äì15:00 (2.5%)"

### 5. üì§ –°–∏—Å—Ç–µ–º–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

**CSV —ç–∫—Å–ø–æ—Ä—Ç (/export_csv):**
- –ì–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è Excel/Google Sheets
- UTF-8-sig –∫–æ–¥–∏—Ä–æ–≤–∫–∞ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã)
- –ü–µ—Ä–∏–æ–¥: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π

**Google Sheets —ç–∫—Å–ø–æ—Ä—Ç (/export_google):**
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- –¢–∞–±—É–ª—è—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Ç–∞–±–ª–∏—Ü—ã + –¥–∞–Ω–Ω—ã–µ

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è get_channel_analytics_data()

```python
# –ù–æ–≤–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
for message in messages:
    if message.video and message.video.duration <= 60:
        if is_circle_message(message):
            circles += 1
        else:
            stories += 1
    elif is_story_like(message):
        stories += 1
    else:
        posts += 1

# –ù–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞ ER
if total_views > 0:
    er = (total_reactions / total_views) * 100
    er_formatted = f"{er:.2f}%"

# –ê–Ω–∞–ª–∏–∑ –ª—É—á—à–∏—Ö —á–∞—Å–æ–≤
if posts_by_hour:
    hour_ers = {}
    for hour, stats in posts_by_hour.items():
        if stats["views"] > 0 and stats["reactions"] > 0:
            hour_er = (stats["reactions"] / stats["views"]) * 100
            hour_ers[hour] = hour_er
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ ER –¥–ª—è –Ω–æ–≤–æ–π —Ñ–æ—Ä–º—É–ª—ã

- **–û—Ç–ª–∏—á–Ω–æ**: ‚â• 5%
- **–•–æ—Ä–æ—à–æ**: ‚â• 3%  
- **–°—Ä–µ–¥–Ω–µ**: ‚â• 1.5%
- **–ü–ª–æ—Ö–æ**: < 1.5%

## üìä –ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

### /export_csv
–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π –≤ CSV —Ñ–∞–π–ª:
- –ö–∞–Ω–∞–ª, –ø–æ–¥–ø–∏—Å—á–∏–∫–∏, –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ —Ç–∏–ø–∞–º
- –û—Ö–≤–∞—Ç—ã, —Ä–µ–∞–∫—Ü–∏–∏, ER, VTR
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∫–∞–Ω–∞–ª–∞, –ª—É—á—à–∏–µ —á–∞—Å—ã

### /export_google  
–ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è Google Sheets:
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Ç–∞–±–ª–∏—Ü—ã
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Ç–∞–±—É–ª—è—Ü–∏–µ–π
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—é

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### ‚úÖ –¢–æ—á–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ ER
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–π –ø–æ —Ç–∏–ø–∞–º –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### ‚úÖ –£–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è  
- –≠–∫—Å–ø–æ—Ä—Ç –≤ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ—Ç—á–µ—Ç—ã —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏

### ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ ER
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è
- –ò–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω—ã–µ best practices

## üöÄ –°—Ç–∞—Ç—É—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

- ‚úÖ –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –≤ main.py
- ‚úÖ –ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã
- ‚úÖ –°–ø—Ä–∞–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–æ–≤–µ—Ä–µ–Ω
- üîÑ –ì–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ Railway

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**: Push –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ Railway
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π  
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –í–æ–∑–º–æ–∂–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

---

**‚ú® –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ V2.0 –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**
