# ü§ñ TG-analiz - –ù–û–í–ê–Ø –†–ê–ë–û–ß–ê–Ø –í–ï–†–°–ò–Ø

[![Railway Deploy](https://img.shields.io/badge/Railway-Deploy-blueviolet?logo=railway&logoColor=white)](https://railway.app/new/template?template=https://github.com/Nilsonfts/TG-analiz)
[![Python 3.12](https://img.shields.io/badge/Python-3.12-blue?logo=python&logoColor=white)](https://python.org)
[![Telegram Bot](https://img.shields.io/badge/Telegram-Bot-blue?logo=telegram&logoColor=white)](https://core.telegram.org/bots)

> **üöÄ –ù–û–í–ê–Ø –†–ê–ë–û–ß–ê–Ø –í–ï–†–°–ò–Ø —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∏ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏**

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û –í –ù–û–í–û–ô –í–ï–†–°–ò–ò:

### üîß **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `story_forwards`** - –±—ã–ª–∞ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ 
- ‚úÖ **–ö–æ–º–∞–Ω–¥–∞ `/summary`** - —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
- ‚úÖ **–ö–æ–º–∞–Ω–¥–∞ `/insights`** - —Ä–∞—Å—á–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ **–ö–æ–º–∞–Ω–¥–∞ `/growth`** - –ø—Ä–æ–≥–Ω–æ–∑—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–∞–Ω–∞–ª–∞
- ‚úÖ **–ö–æ–º–∞–Ω–¥–∞ `/channel_info`** - —É–ª—É—á—à–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞–Ω–∞–ª–µ
- ‚úÖ **–ö–æ–º–∞–Ω–¥–∞ `/smm`** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è –∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—ä—è—Å–Ω–µ–Ω–∏—è API

### üì∫ **–¢–ï–†–ú–ò–ù–û–õ–û–ì–ò–Ø "STORIES" ‚Üí "–°–¢–û–†–ò–°":**
- ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–∞—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è
- ‚úÖ –í—Å–µ –æ—Ç—á–µ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç "–°–¢–û–†–ò–°" –≤–º–µ—Å—Ç–æ "Stories"
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è

### üìä **–û–ë–™–Ø–°–ù–ï–ù–ò–Ø –û–ì–†–ê–ù–ò–ß–ï–ù–ò–ô API:**
- ‚úÖ –í–æ –≤—Å–µ—Ö –æ—Ç—á–µ—Ç–∞—Ö –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ—è—Å–Ω–µ–Ω–∏—è –æ–± –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö Telegram API
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–Ω–∏–º–∞—é—Ç –æ—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ: —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ vs –æ—Ü–µ–Ω–æ—á–Ω—ã–µ

## üöÄ Quick Deploy

**Deploy in 1 minute:**

[![Deploy on Railway](https://railway.app/button.svg)](https://railway.app/new/template?template=https://github.com/Nilsonfts/TG-analiz)

1. Click "Deploy on Railway" ‚Üë
2. Add `BOT_TOKEN` from [@BotFather](https://t.me/BotFather)
3. Add `CHANNEL_ID`, `API_ID`, `API_HASH`, `SESSION_STRING`
4. Your bot is live! üéâ

## ü§ñ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ –∏ —Å—Ç–∞—Ç—É—Å
- `/status` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º
- `/summary` - üìä **–ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –∫–∞–Ω–∞–ª–∞ (–†–ï–ê–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï)**
- `/growth` - üìà **–ê–Ω–∞–ª–∏–∑ —Ä–æ—Å—Ç–∞ —Å –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏ (–†–ï–ê–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï)**
- `/insights` - üß† **–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã (–†–ï–ê–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï)**
- `/analiz` - üìä –í–∏–∑—É–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (PNG –≥—Ä–∞—Ñ–∏–∫–∏)
- `/charts` - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏
- `/smm` - üìä **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π SMM-–æ—Ç—á–µ—Ç (–ò–°–ü–†–ê–í–õ–ï–ù)**
- `/daily_report` - üìÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç
- `/monthly_report` - üìÜ –ú–µ—Å—è—á–Ω—ã–π –æ—Ç—á–µ—Ç
- `/channel_info` - **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–Ω–∞–ª–µ (–£–õ–£–ß–®–ï–ù–û)**
- `/help` - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º

## üìä –ß—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ "–°–¢–û–†–ò–°":

–í Telegram –∫–∞–Ω–∞–ª–∞—Ö **"–°–¢–û–†–ò–°"** = **–≤–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç**:
- üìπ **–ö–æ—Ä–æ—Ç–∫–∏–µ –≤–∏–¥–µ–æ** (‚â§60 —Å–µ–∫—É–Ω–¥)
- üì∏ **–§–æ—Ç–æ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞** –∏–ª–∏ —Å –∫–æ—Ä–æ—Ç–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º (<50 —Å–∏–º–≤–æ–ª–æ–≤)
- üé• **–ö—Ä—É–∂–∫–∏** = –∫—Ä—É–≥–ª—ã–µ –≤–∏–¥–µ–æ-—Å–æ–æ–±—â–µ–Ω–∏—è (–≤—ã–¥–µ–ª–µ–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ)

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Telegram API:

- **–¢–æ—á–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏/–æ—Ç–ø–∏—Å–∫–∏** –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–π API
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–π API  
- **–°–¢–û–†–ò–°** –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º (—É–∫–∞–∑–∞–Ω–æ –≤—ã—à–µ)
- **–î–∞–Ω–Ω—ã–µ –æ –ø–æ–¥–ø–∏—Å–∫–∞—Ö** - –æ—Ü–µ–Ω–æ—á–Ω—ã–µ, –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## üõ† Setup

### Prerequisites

- Python 3.12+
- Railway Account (free tier available)
- Telegram Bot Token from [@BotFather](https://t.me/BotFather)
- Telegram API credentials from [my.telegram.org/apps](https://my.telegram.org/apps)

### Environment Variables

–î–æ–±–∞–≤—å—Ç–µ –≤ Railway Variables:

```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
BOT_TOKEN=your_bot_token_from_botfather
CHANNEL_ID=your_channel_id
API_ID=your_api_id
API_HASH=your_api_hash
SESSION_STRING=your_session_string

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ  
ADMIN_USERS=196614680,208281210,1334453330
TIMEZONE=Europe/Moscow
REPORTS_CHAT_ID=196614680
```

## üìà Features

- **Real-time Analytics** - Live channel statistics via Telethon API
- **Interactive Commands** - Rich command interface with inline keyboards  
- **Railway Ready** - Optimized for Railway deployment with health checks
- **Fixed Data** - All commands now show real data instead of hardcoded values
- **API Explanations** - Clear explanations of Telegram API limitations
- **Russian Terminology** - Consistent use of "–°–¢–û–†–ò–°" throughout the app

## üîß Technical Improvements

- ‚úÖ Fixed uninitialized `story_forwards` variable
- ‚úÖ Improved `get_real_channel_stats()` function
- ‚úÖ Real analytics data in all commands
- ‚úÖ Unified terminology across all reports
- ‚úÖ Added API limitation explanations
- ‚úÖ Enhanced error handling and logging

## üöÄ Deployment

1. **Fork this repository**
2. **Deploy to Railway:**
   - Connect your GitHub account
   - Import your forked repository
   - Add environment variables
   - Deploy!

3. **Test your bot:**
   ```
   /start - Check if bot responds
   /status - Verify all systems
   /summary - Test real data collection
   ```

## üìû Support

If you encounter any issues:

1. Check `/status` command for diagnostics
2. Verify all environment variables are set
3. Check Railway logs for errors

---

**üéâ –ù–û–í–ê–Ø –†–ê–ë–û–ß–ê–Ø –í–ï–†–°–ò–Ø –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

*–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, –¥–∞–Ω–Ω—ã–µ —Ç–µ–ø–µ—Ä—å —Ä–µ–∞–ª—å–Ω—ã–µ, —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞.*
- Telegram Bot Token (from [@BotFather](https://t.me/botfather))
- Telegram API credentials (api_id, api_hash)

### Local Development

1. **Clone the repository**
   ```bash
   git clone https://github.com/Nilsonfts/TG-analiz.git
   cd TG-analiz
   ```

2. **Create virtual environment**
   ```bash
   python -m venv venv
   source venv/bin/activate  # Linux/Mac
   # or
   venv\Scripts\activate     # Windows
   ```

3. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```

4. **Configure environment**
   ```bash
   cp .env.example .env
   # Edit .env with your credentials
   ```

5. **Run the bot**
   ```bash
   python main.py
   ```

### Environment Variables

| Variable | Description | Required |
|----------|-------------|----------|
| `BOT_TOKEN` | Telegram bot token | ‚úÖ |
| `API_ID` | Telegram API ID | ‚úÖ |
| `API_HASH` | Telegram API hash | ‚úÖ |
| `CHANNEL_ID` | Target channel ID/username | ‚ùå |
| `ADMIN_USERS` | Comma-separated admin user IDs | ‚ùå |
| `PORT` | HTTP server port (default: 8080) | ‚ùå |

## üöÄ Railway Deployment

1. **Connect to Railway**
   ```bash
   # Railway automatically deploys from main branch
   ```

2. **Set environment variables in Railway dashboard**
   - Add all required variables from the table above

3. **Deploy**
   ```bash
   git push origin main
   # Railway auto-deploys
   ```

## üß™ Development

### Code Quality

```bash
# Linting
ruff check .
ruff format .

# Type checking  
mypy main.py --strict

# Testing
pytest --cov=. --cov-report=html
```

### Project Structure

```
TG-analiz/
‚îú‚îÄ‚îÄ main.py                 # Main bot application
‚îú‚îÄ‚îÄ requirements.txt        # Python dependencies
‚îú‚îÄ‚îÄ Dockerfile             # Container configuration
‚îú‚îÄ‚îÄ pyproject.toml         # Tool configurations
‚îú‚îÄ‚îÄ .github/workflows/     # CI/CD pipeline
‚îú‚îÄ‚îÄ tests/                 # Test suite
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py       # Test configuration
‚îÇ   ‚îî‚îÄ‚îÄ test_main.py      # Main tests
‚îú‚îÄ‚îÄ utils/                # Utility modules
‚îú‚îÄ‚îÄ services/             # Service layer
‚îî‚îÄ‚îÄ database/             # Database models
```

## üîß Configuration

### Ruff (Linting & Formatting)
Configured in `pyproject.toml` with Python 3.12 target, 88 character line length.

### MyPy (Type Checking)
Strict mode enabled with comprehensive type checking rules.

### Pytest (Testing)
Configured with coverage reporting and custom markers for integration tests.

## üìä Monitoring

- **Health Check**: `GET /health` - Returns bot status
- **Railway Logs**: Available in Railway dashboard
- **Coverage Reports**: Generated in `htmlcov/` directory

## ü§ù Contributing

1. Fork the repository
2. Create feature branch: `git checkout -b feature/amazing-feature`
3. Make changes with tests
4. Run quality checks: `ruff check . && mypy main.py --strict && pytest`
5. Commit: `git commit -m 'Add amazing feature'`
6. Push: `git push origin feature/amazing-feature`
7. Open Pull Request

## üìù License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üôè Acknowledgments

- [python-telegram-bot](https://github.com/python-telegram-bot/python-telegram-bot) - Telegram Bot API wrapper
- [Telethon](https://github.com/LonamiWebs/Telethon) - Telegram API client
- [Railway](https://railway.app) - Deployment platform

---

**Made with ‚ù§Ô∏è for the Telegram community**
