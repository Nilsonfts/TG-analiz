# üöÄ MAJOR UPDATE: TG Analytics Bot v2.1

## üéØ –ì–õ–ê–í–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ê
**–ü—Ä–æ–±–ª–µ–º–∞:** `can't compare offset-naive and offset-aware datetimes`
**–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ timezone –≤–æ –≤—Å–µ datetime –æ–ø–µ—Ä–∞—Ü–∏–∏

```python
# –î–û (–æ—à–∏–±–∫–∞):
end_date = datetime.now()

# –ü–û–°–õ–ï (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ):
tz = pytz.timezone('Europe/Moscow')
end_date = datetime.now(tz)
```

### üìä –ù–û–í–ê–Ø –ö–û–ú–ê–ù–î–ê /charts - SMART ANALYTICS

#### üî• –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:
- **–î–û:** –ü—Ä–æ—Å—Ç—ã–µ –∫–Ω–æ–ø–∫–∏ —Å –∑–∞–≥–ª—É—à–∫–∞–º–∏
- **–ü–û–°–õ–ï:** –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è smart –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

#### ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
1. **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∫–∞–Ω–∞–ª–∞** —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ üå°Ô∏è
2. **–¢—Ä–µ–Ω–¥—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** —Å —ç–º–æ–¥–∑–∏ (üìàüìâ‚û°Ô∏è)
3. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤** (–Ω–µ–¥–µ–ª—è vs –º–µ—Å—è—Ü)
4. **–ü—Ä–æ–≥–Ω–æ–∑—ã —Ä–æ—Å—Ç–∞** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
5. **–ó–æ–ª–æ—Ç—ã–µ —á–∞—Å—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–π** —Å ER –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏
6. **–î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** –¥–ª—è —Ä–æ—Å—Ç–∞ –∫–∞–Ω–∞–ª–∞

#### üìã –ü—Ä–∏–º–µ—Ä –Ω–æ–≤–æ–≥–æ –æ—Ç—á–µ—Ç–∞:
```
üìä SMART ANALYTICS: –ï–í–ì–ï–ù–ò–ß –ë–ê–† | –°–ü–ë –ù–ï–í–°–ö–ò–ô

üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∫–∞–Ω–∞–ª–∞: üî•üî•üî•‚¨ú‚¨ú (3/5)
üë• –ê—É–¥–∏—Ç–æ—Ä–∏—è: 1,126 –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
üîÑ ER —Ä–µ–π—Ç–∏–Ω–≥: ‚úÖ –•–æ—Ä–æ—à–æ

üìà –ê–ö–¢–ò–í–ù–û–°–¢–¨ –ó–ê 7 –î–ù–ï–ô:
üìù –ü–æ—Å—Ç–æ–≤: 12 üìà +15.2%
üì∫ –°–¢–û–†–ò–°: 5
‚ö° –°—Ä–µ–¥–Ω–∏–π –æ—Ö–≤–∞—Ç: 850 üìà +8.3%
üéØ ER: 4.2%

‚è∞ –ó–û–õ–û–¢–´–ï –ß–ê–°–´ –ü–£–ë–õ–ò–ö–ê–¶–ò–ô:
‚Ä¢ ü•á 18:00-19:00 ‚Üí ER: 6.8%
‚Ä¢ ü•à 12:00-13:00 ‚Üí ER: 5.1%
‚Ä¢ ü•â 21:00-22:00 ‚Üí ER: 4.9%

üîÆ –ü–†–û–ì–ù–û–ó–´ –ù–ê –ú–ï–°–Ø–¶:
üëÅ –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ö–≤–∞—Ç: 14,650
üë• –ü—Ä–æ–≥–Ω–æ–∑ —Ä–æ—Å—Ç–∞: +36 –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
üì± –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —á–∞—Å—Ç–æ—Ç–∞: 2 –ø–æ—Å—Ç–æ–≤/–¥–µ–Ω—å
```

### üìÑ –≠–ö–°–ü–û–†–¢ –î–ê–ù–ù–´–•

#### üÜï /export_csv
- –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫ –≤ CSV —Ñ–∞–π–ª
- 30 –¥–Ω–µ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –ì–æ—Ç–æ–≤ –¥–ª—è Excel/Google Sheets
- UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–∞

#### üöß /export_google (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ Google Sheets
- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏
- –°–æ–≤–º–µ—Å—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø

### üõ†Ô∏è –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –£–õ–£–ß–®–ï–ù–ò–Ø

#### 1. Timezone Support
```python
# –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç:
tz = pytz.timezone('Europe/Moscow')
datetime.now(tz)
```

#### 2. –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –ø—Ä–æ–±–ª–µ–º—ã
- –°—Ç–∞—Ç—É—Å—ã –∑–∞–≥—Ä—É–∑–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

#### 3. –ó–∞—â–∏—Ç–∞ –æ—Ç None –∑–Ω–∞—á–µ–Ω–∏–π
```python
# –ó–∞—â–∏—Ç–∞ –≤–æ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö:
try:
    current_count = int(current_count) if current_count is not None else 0
except (ValueError, TypeError):
    current_count = 0
```

## üéØ –ö–û–ú–ê–ù–î–´ –û–ë–ù–û–í–õ–ï–ù–´

### ‚úÖ –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –ë–ï–ó –û–®–ò–ë–û–ö:
- `/growth` - –∞–Ω–∞–ª–∏–∑ —Ä–æ—Å—Ç–∞ —Å –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏
- `/insights` - –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã  
- `/charts` - smart –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- `/summary` - —Å–≤–æ–¥–∫–∞ –∫–∞–Ω–∞–ª–∞

### üÜï –ù–û–í–´–ï –ö–û–ú–ê–ù–î–´:
- `/export_csv` - —ç–∫—Å–ø–æ—Ä—Ç –≤ CSV
- `/export_google` - Google Sheets (—Å–∫–æ—Ä–æ)

## üìà –†–ï–ó–£–õ–¨–¢–ê–¢–´

### üî¥ –ü—Ä–æ–±–ª–µ–º—ã –î–û –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
```
‚ùå can't compare offset-naive and offset-aware datetimes
‚ùå /charts - –Ω–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ
‚ùå /growth - –æ—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞
‚ùå /insights - –æ—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞
```

### üü¢ –†–µ–∑—É–ª—å—Ç–∞—Ç –ü–û–°–õ–ï –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
```
‚úÖ –í—Å–µ timezone –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
‚úÖ /charts - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è smart –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚úÖ /growth - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏
‚úÖ /insights - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å–∞–π—Ç—ã
‚úÖ /export_csv - —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

## üöÄ –ß–¢–û –î–ê–õ–¨–®–ï?

### üìä Google Sheets –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
1. API –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Google Sheets
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞
3. –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
4. –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã

### üì± –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
1. –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
2. –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã
3. Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### ü§ñ AI-–∏–Ω—Å–∞–π—Ç—ã:
1. –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Ç—Ä–µ–Ω–¥–æ–≤
2. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
3. –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–π

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô

### üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

1. **–ï–∂–µ–¥–Ω–µ–≤–Ω–æ:** `/charts` - –±—ã—Å—Ç—Ä–∞—è smart –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
2. **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ:** `/export_csv` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
3. **–î–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "–∑–æ–ª–æ—Ç—ã–µ —á–∞—Å—ã" –∏–∑ `/charts`
4. **–î–ª—è —Ä–æ—Å—Ç–∞:** –°–ª–µ–¥—É–π—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º –≤ –æ—Ç—á–µ—Ç–∞—Ö

### üìä –î–ª—è –ª—É—á—à–µ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:
- –ü—É–±–ª–∏–∫—É–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –∫–∞–Ω–∞–ª–∞
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ç—Ä–µ–Ω–¥–∞–º–∏ ER

---

**üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ Telegram –∫–∞–Ω–∞–ª–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –±–µ–∑ –æ—à–∏–±–æ–∫!**

*–í–µ—Ä—Å–∏—è: 2.1 | –î–∞—Ç–∞: 2025-07-22 | –°—Ç–∞—Ç—É—Å: ‚úÖ –î–µ–ø–ª–æ–π –≤ Railway*
